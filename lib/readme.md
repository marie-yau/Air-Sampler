# lib directory

This folder contains the modules for managing various tasks of the air sampler. 

## Main script

Note that the main script, ```main.py```, doesn't use all modules (e.g. ```gps.py``` and ```dip_switch.py```).

The algorithm used by the main script is described in the diagram below.
![Diagram](/img/algorithm_diagram.png)

## Directory contents
```Sampler``` class in ```sampler.py``` uses classes ```Pump``` in ```pump.py``` and ```Valve``` in ```valve.py``` to control one pump and set of valves.

![Diagram](/img/UML_sampler.png)

```Sampler Schedule``` in ```sampler_schedule.py``` and ```Configuration``` in ```configuration.py``` classes read schedule and configuration from files on USB drive based on file paths generated by ```USB Drive``` class in ```usb_drive.py```.

```Sampler Schedule``` generates three schedules:

- bag schedule that is a list of ```Bag Event``` objects from ```bag_event.py```
- pump schedule that is a list of ```Valve Event``` objects from ```valve_event.py```
- valve schedule that is a list of ```Pump Event``` objects from ```pump_event.py```
![Diagram](/img/UML_files.png)

```GPS``` class in ```gps.py``` reads geographic position from satellite and creates ```Geographic Position``` object.
![Diagram](/img/UML_GPS.png)

The folder also contains classes ```Diode``` in ```diode.py```, ```DIP Switch``` in ```dip_switch.py```, and ```USB Drive``` in ```usb_drive.py``` that represent additional hardware beside pump and valves.
![Diagram](/img/UML_hardware.png)

The folder also contains packages of functions. Namely, ```logger.py```, ```validate.py```, and ```settings.py```.
![Diagram](/img/UML_package.png)


